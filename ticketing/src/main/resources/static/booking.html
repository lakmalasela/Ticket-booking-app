<!DOCTYPE html>
<html lang="en">
<head>
    <title>STAR CINEMA </title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--    Bootstrap-->
    <link rel="stylesheet" href="./resources/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./resources/bootstrap/css/font-awesome.min.css">


    <script src="./resources/fontawesome/js/solid.js"></script>
    <script src="./resources/fontawesome/js/fontawesome.js"></script>

    <link rel="icon" href="resources/image/cnew.jpg" type="image/x-icon">

    <!-- google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">

    <!--google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&family=Merriweather+Sans:wght@500&display=swap" rel="stylesheet">


    <style>

        .table-container {
            width: auto;
            overflow-x: scroll !important;
        }

        .tooltip-inner {
            background-color: #f00;
        }
    </style>


    <script defer src="resources/fontawesome/js/solid.js"></script>
    <script defer src="resources/fontawesome/js/fontawesome.js"></script>


    <script src="resources/jquery/jquery-3.4.1.min.js"></script>
    <script src="resources/jquery/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="resources/jquery/popper.min.js"></script>
    <script src="resources/bootstrap/js/bootstrap.bundle.min.js"></script>




    <script src="./resources/script/clock.js"></script>
    <script src="resources/script/common.js"></script>
    <script src="./resources/script/innertablefunctions.js"></script>
    <script src="./resources/script/sweetalert.min.js"></script>


    <script src="booking.js"></script>
    <link rel="stylesheet" href="resources/style/common.css">
    <link rel="stylesheet" href="resources/style/booking.css">






    <link href='resources/style/clock.css' rel='stylesheet' />

    <script>

    </script>


</head>
<body>

<div class="wrapper">
    <!-- Page Content  -->
    <div id="content">
        <!-- Content -->
        <div class="container-fluid dashbordbody p-0">

            <div class="row" id="ui">
                <div class="col-md-12">
                    <div class="card cardstyle">
                        <div class="card-header text-left cardhead">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="AnimateShadow">
                                        <h2 class="ceylonHead"> <i class="fas fa-film mr-2 animatesymboll"></i>STAR CINAMA Booking Ticket </h2>


                                    </div>
                                </div>
                                <div class="col-md-4">
                                        <span id="clockdate">
                                <div class="clockdate-wrapper">
                                    <div id="clock"></div>
                                    <div id="date"></div>
                                </div>
                            </span>
                                </div>
                                <div class="col-md-2"></div>
                            </div>



                        </div>






                        <div class="card-body" style="background-image: linear-gradient(rgba(255, 248, 248, 0.640),rgba(247, 237, 237, 0.80))">




                                <div class="row">
                                    <div class="col-md-3 block_other">
                                        <div  class="new-blog myDiv" ><img class="img-responsive img_block" src="./resources/img/endgame.jpeg" alt=""></div>

                                    </div>
                                    <div class="col-md-3 block_other">
                                        <div  class="new-blog myDiv" ><img class="img-responsive img_block" src="./resources/img/noway.jpg" alt=""></div>


                                    </div>
                                    <div class="col-md-3 block_other">
                                        <div  class="new-blog myDiv"><img class="img-responsive img_block" src="./resources/img/dc.jpg" alt=""></div>

                                    </div>
                                    <div class="col-md-3 block_other">
                                        <div  class="new-blog myDiv"><img class="img-responsive img_block" src="./resources/img/hobbit.jpg" alt=""></div>

                                    </div>
                                </div>

                            <!-- Modal -->
                            <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="">Booking Your Seats</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <ul class="nav nav-tabs mb-2">
                                                <li class="nav-item ceylonLog" onclick="changeTab('form')">
                                                    <a class="nav-link active" id="tbForm" href="#">Booking Form</a>
                                                </li>
                                                <li class="nav-item ceylonLog" onclick="changeTab('table')">
                                                    <a class="nav-link" id="tbTable" href="#">Booking View Table</a>
                                                </li>
                                            </ul>

                                            <!--customer form-->
                                            <div class="row p-3 formB" id="divFrom">
                                                <div class="col-md-12">
                                                    <form class="" id="employeeform" onsubmit="return false">

                                                        <div class="row">
                                                            <div class="col-md-12" style=" text-align: right;">
                                                                <span class="ceylonLog" style="color: red;">* Required </span>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <!-- main Form -->
                                                            <div class="col-md-5">

                                                                <!--Name-->
                                                                <div class="row mt-2">
                                                                    <div class="col-md-4">
                                                                        <label for="txtname" class="ceylonLog"><b>Name: <span style="color: red;">*</span></b></label>
                                                                    </div>
                                                                    <div class="col-md-8">
                                                                        <div class="input-group flex-nowrap">
                                                                            <span class="input-group-text"><i class="fas fa-user"></i></span>
                                                                            <input type="text" id="txtname"  required onkeyup="textFieldBinder(txtname,'^[A-Z][a-z]+$','booking','customername','oldbooking')"  class="form-control" placeholder="Enter the Name " data-toggle="tooltip" title="Insert Name" data-placement="top">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- Book No -->
                                                                <div class="row mt-2">
                                                                    <div class="col-md-4">
                                                                        <label for="txtbookno" class="ceylonLog"><b>Book No : <span style="color: red;">*</span></b></label>
                                                                    </div>
                                                                    <div class="col-md-8">
                                                                        <div class="input-group flex-nowrap">
                                                                            <span class="input-group-text"><i class="fas fa-file-contract"></i></span>
                                                                            <input type="text" id="txtbookno" disabled required  class="form-control" placeholder="Enter the Book No " data-toggle="tooltip" title="Insert the Book No" data-placement="top">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- Movie-->
                                                                <div class="row mt-2">
                                                                    <div class="col-md-4">
                                                                        <label for="cmbmovie" class="ceylonLog"><b>Movie: <span style="color: red;">*</span></b></label>
                                                                    </div>
                                                                    <div class="col-md-8">

                                                                        <div class="input-group flex-nowrap">
                                                                            <span class="input-group-text"><i class="fas fa-film"></i></span>
                                                                            <select id="cmbmovie" onchange="comboBoxBinder(cmbmovie,'','booking','movie_id','oldbooking')" class="form-control" data-toggle="tooltip" title="Select the BSR Status" data-placement="top"></select>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- Showing Time -->
                                                                <div class="row mt-2">
                                                                    <div class="col-md-4">
                                                                        <label for="cmbshowingtime" class="ceylonLog"><b>Showing Time : <span style="color: red;">*</span></b></label>
                                                                    </div>
                                                                    <div class="col-md-8">

                                                                        <div class="input-group flex-nowrap">
                                                                            <span class="input-group-text"><i class="fas fa-file-alt"></i></span>
                                                                            <select id="cmbshowingtime" onchange="comboBoxBinder(cmbshowingtime,'','booking','showingtime_id','oldbooking')" class="form-control" data-toggle="tooltip" title="Select the Show Time" data-placement="top"></select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                                <!-- Price -->
                                                                <div class="row mt-2">
                                                                    <div class="col-md-4">
                                                                        <label for="txtprice" class="ceylonLog"><b>Price : <span style="color: red;">*</span></b></label>
                                                                    </div>
                                                                    <div class="col-md-8">

                                                                        <div class="input-group flex-nowrap">
                                                                            <span class="input-group-text price">RS</span>
                                                                            <input type="text" disabled id="txtprice"  class="form-control" placeholder="Ticket Price" data-toggle="tooltip" title="Ticket Price" data-placement="bottom">
                                                                        </div>

                                                                    </div>
                                                                </div>


                                                                <!-- Booking Time -->
                                                                <div class="row mt-2">
                                                                    <div class="col-md-4">
                                                                        <label for="txtbookingdatetime" class="ceylonLog"><b>Booking Time : <span style="color: red;">*</span></b></label>
                                                                    </div>
                                                                    <div class="col-md-8">

                                                                        <div class="input-group flex-nowrap">
                                                                            <span class="input-group-text"><i class="fas fa-clock"></i></span>
                                                                            <input type="datetime-local"  disabled id="txtbookingdatetime" class="form-control" data-toggle="tooltip" title="Insert the Added date" data-placement="bottom">
                                                                        </div>

                                                                    </div>
                                                                </div>

                          <div style="text-align: center">
                              <div class="row mt-5">
                                  <div class="col-md-12">
                                      <button class="btn addAllbtn bookseat" style="width: 25%" type="submit" id="btnAdd">
                                          <i class='fas fa-plus-circle mr-2'></i>Add
                                      </button>
                                  </div>
                              </div>
                              <div class="row mt-2">
                                  <div class="col-md-12">
                                      <button class="btn updateAllbtn bookseat" type="submit" id="btnUpdate"
                                              style="width: 25%"> <i class="fas fa-edit mr-2"></i> Update</button>
                                  </div>
                              </div>
                              <div class="row mt-2">
                                  <div class="col-md-12">
                                      <button class="btn clearAllbtn bookseat" type="button" id="btnClear" style="width: 25%">
                                          <i class="fas fa-recycle mr-2"></i> Clear
                                      </button>
                                  </div>
                              </div>
                          </div>




                                                                <!-- Booking status -->
<!--                                                                <div class="row mt-2">-->
<!--                                                                    <div class="col-md-4">-->
<!--                                                                        <label for="cmdbsrStatus" class="ceylonLog"><b>Booking Status : <span style="color: red;">*</span></b></label>-->
<!--                                                                    </div>-->
<!--                                                                    <div class="col-md-8">-->

<!--                                                                        <div class="input-group flex-nowrap">-->
<!--                                                                            <span class="input-group-text"><i class="fas fa-star-half-alt"></i></span>-->
<!--                                                                            <select id="cmdbsrStatus" onchange="comboBoxBinder(cmdbsrStatus,'','bsr','bsrstatus_id','oldbsr')" class="form-control" data-toggle="tooltip" title="Select the BSR Status" data-placement="top"></select>-->
<!--                                                                        </div>-->

<!--                                                                    </div>-->
<!--                                                                </div>-->


                                                            </div>
                                                            <!-- innerForm -->
                                                            <div class="col-md-7">
                                                                <div class="card">
                                                                    <div class="card-header cardhead">
                                                                        <img class="cnew" src="./resources/img/star.png" alt=""><span class="star">Seat Booking</span>
                                                                        <h2 class="ceylonLog cardForheader"> </h2>
                                                                    </div>
                                                                    <div class="card-body">

                                                                        <div class="container">
                                                                            <div class="row">
                                                                                <div class="col-md-12 seats">
                                                                                    <!-- Create a container for the grid of buttons -->
                                                                                    <div class="button-grid" id="button-grid"></div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!-- Seat -->

<!--                                                                        <div class="row mt-2">-->
<!--                                                                            <div class="col-md-4">-->

<!--                                                                                <label for="cmdSeat" class="ceylonLog"><b>Seat : <span style="color: red;">*</span></b></label>-->
<!--                                                                            </div>-->
<!--                                                                            <div class="col-md-8">-->
<!--                                                                                <div class="input-group flex-nowrap">-->
<!--                                                                                    <span class="input-group-text"><i class="fas fa-file-invoice"></i></span>-->
<!--                                                                                    <select id="cmdSeat"  onchange="comboBoxBinder(cmdSeat,'','Bookinghasseat','seat_id','oldBookinghasseat');" class="form-control" data-toggle="tooltip" title="Select the Sub BSR Category" data-placement="top"></select>-->
<!--                                                                                </div>-->
<!--                                                                            </div>-->
<!--                                                                        </div>-->





                                                                        <!-- innerButton -->
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <div class="text-right mt-2">
                                                                                    <button class="btn btn-outline-success ceylonLog" type="button" onclick="btnInnerAddMC();" id="btnInnerAdd" style="width: 25%">
                                                                                        <i class="fas fa-plus-circle mr-2"></i> Add
                                                                                    </button>

                                                                                    <button class="btn btn-outline-warning ceylonLog" type="button" onclick="btnInnerUpdateMC();" id="btnInnerUpdate" style="width: 25%">
                                                                                        <i class="fas fa-plus-circle mr-2"></i> Update
                                                                                    </button>

                                                                                    <button class="btn btn-outline-info ceylonLog" type="button" onclick="btnInnerClearMC();" id="btnInnerClear"
                                                                                            style="width: 25%"> <i class="fas fa-recycle mr-2"></i>Clear</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <!-- innerTable -->
                                                                        <div class="row mt-2">
                                                                            <div class="col-md-12">

                                                                                <div id="accordion">
                                                                                    <div class="card">
                                                                                        <div class="card-header cardForheader"  style="background-color:#bae0f1;" id="headingThree">

                                                                                            <h5 class="mb-0">
                                                                                                <button class="btn btn-link collapsed" style="text-decoration: none;"  data-toggle="collapse" data-target="#collapseBSRtable" aria-expanded="false" aria-controls="collapseBSRtable">
                                                                                                    <h4 class="ceylonLog"><i class="fas fa-table"></i> Seat Details</h4>
                                                                                                </button>
                                                                                            </h5>
                                                                                        </div>
                                                                                        <div id="collapseBSRtable" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                                                                                            <div class="card-body">

                                                                                                <div class="row" id="InnerBookingtable" style="height: 200px;overflow-y:scroll;">
                                                                                                    <script>
                                                                                                        var metadatainner = [
                                                                                                            {name: 'Seat', search: true, datatype: 'text', property: 'seat_id.seatcode'},


                                                                                                        ];


                                                                                                        tableForInnerForm("InnerBookingtable","tblInnerbookseat",metadatainner,true);
                                                                                                    </script>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>










                                                                        </div>



                                                                    </div>
                                                                    <div class="card-footer">

                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>


                                                        <!--main buttons -->
                                                        <div class="text-center mt-3">




                                                        </div>


                                                    </form>
                                                </div>
                                            </div>

                                            <div class="row p-3 formcontent" id="divTable">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-9">

                                                            <!--                                            <input type="button" class="btn tblbtnprint font-weight-bold" value="Print Table"-->
                                                            <!--                                                   id="btnPrintTable" onclick="btnPrintTableMC()"/>-->

                                                            <button  id="btnPrintTable" class="btn btn-info ceylonLog" onclick="btnPrintTableMC()"><i class='fas fa-print mr-2'></i>Print Table</button>
                                                        </div>
                                                        <div class="col-md-3">

                                                            <div class="float-right input-group">
                                                                <span class="input-group-text" id="basic-addon1"><i class="fas fa-search"></i></span>
                                                                <input placeholder="Search" class="form-control" type="text"
                                                                       id="txtSearchName"/>
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <!--                                    <input type="button" class="btn tblbtnprint font-weight-bold" value="Print Table"-->
                                                    <!--                                           id="btnPrintTable" onclick="btnPrintTableMC()"/>-->
                                                    <!--                                    -->
                                                    <!--                                    <div class="float-right input-group">-->
                                                    <!--                                        <span class="input-group-text" id="basic-addon1"><i class="fas fa-search"></i></span>-->
                                                    <!--                                        <input placeholder="Search" class="form-control" type="text"-->
                                                    <!--                                               id="txtSearchName"/>-->
                                                    <!--                                    </div>-->

                                                </div>


                                                <hr/>
                                                <div class="table-responsive" id="tableParent" class="table-container ml-2">

                                                    <script>

                                                        function getNameColumn(ob) {
                                                            return ob.callingname + "(" + ob.number + ")";
                                                        }

                                                        var metadata = [
                                                            {name: 'Booking ID', search: true, datatype: 'text', property: 'bookid'},
                                                            {name: 'Name', search: true, datatype: 'text', property: 'customername'},
                                                            {name: 'Price', search: true, datatype: 'amount', property: 'price'},
                                                            {
                                                                name: 'Movie',
                                                                search: true,
                                                                datatype: 'text',
                                                                property: 'movie_id.name'
                                                            },
                                                            {
                                                                name: 'Time',
                                                                search: true,
                                                                datatype: 'text',
                                                                property: 'showingtime_id.time'
                                                            }
                                                        ];
                                                        table("tableParent", "tblBooking", metadata, true);

                                                    </script>


                                                </div>

                                                <div>
                                                    <div style="display: inline-block ; float: left">
                                                        <select class="form-control input" id="cmbPageSize"
                                                                style="width: 80px;">
                                                            <option selected value="5">5</option>
                                                            <option value="10">10</option>
                                                            <option value="15">15</option>
                                                            <option value="20">20</option>
                                                            <!--                                            <option value="1000">1000</option>-->
                                                        </select>
                                                        <script>
                                                            cmbPageSize.onchange = function chnagePageSize() {
                                                                activepage = 1;
                                                                btnSearchMC();
                                                            };
                                                        </script>
                                                    </div>
                                                    <div style="display: inline-block; margin-left: 10px;">
                                                        <ul id="pagination" class="pagination"></ul>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                            <button type="button" class="btn btn-primary">Save changes</button>
                                        </div>
                                    </div>
                                </div>
                            </div>








                        </div>

                        <div class="card-footer">

                        </div>

                    </div>

                </div>
            </div>


        </div>

    </div>
</div>






<!-- Settings Modal-->
<div class="modal fade" id="settingsModal" tabindex="-1" role="dialog"
     aria-labelledby="settingsModal" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content" id="modalContent">
            <div class="modal-header">
                <h5 class="modal-title" id="modalTitle"><i
                        class="fas fa-cog"></i> Settings</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <form id="changePasswordForm" onsubmit="return false">
                    <div class="form-row">
                        <!-- Username -->
                        <div class="form-group col-md-12">
                            <label for="txtUsernameView" class="text-blue">
                                <b>Username</b>
                            </label>
                            <div readonly class="form-control-plaintext"
                                 id="txtUsernameView"></div>
                        </div>
                    </div>
                    <div class="form-row">
                        <!-- Current Password -->
                        <div class="form-group col-md-12">
                            <label for="txtCurrentPassword"
                                   class="text-blue"><b>Current Password</b> <i
                                    class="fas fa-question-circle text-primary ml-1"
                                    data-toggle="tooltip" data-placement="right"
                                    title=""></i></label>
                            <input type="password"
                                   class="form-control form-control-sm changePasswordFields"
                                   id="txtCurrentPassword"
                                   onkeyup="textFieldBinder(txtCurrentPassword, '^[0-9]{5,}$', 'changePassword', 'currentPassword', 'oldChangePassword')">
                        </div>
                    </div>
                    <div class="form-row">
                        <!-- New Password -->
                        <div class="form-group col-md-12">
                            <label for="txtNewPassword" class="text-blue"><b>New
                                Password</b><i
                                    class="fas fa-question-circle text-primary ml-1"
                                    data-toggle="tooltip" data-placement="right"
                                    title=""></i></label>
                            <input type="password"
                                   class="form-control form-control-sm changePasswordFields"
                                   id="txtNewPassword"
                                   onkeyup="passwordFieldBinder(txtNewPassword, txtConfirmPassword, '^[0-9]{5,}$', 'changePassword', '', 'oldChangePassword')">
                        </div>
                    </div>
                    <div class="form-row">
                        <!-- Confirm Password -->
                        <div class="form-group col-md-12">
                            <label for="txtConfirmPassword"
                                   class="text-blue"><b>Confirm
                                Password</b><i
                                    class="fas fa-question-circle text-primary ml-1"
                                    data-toggle="tooltip" data-placement="right"
                                    title=""></i></label>
                            <input type="password"
                                   class="form-control form-control-sm changePasswordFields"
                                   id="txtConfirmPassword"
                                   onkeyup="passwordFieldBinder(txtNewPassword, txtConfirmPassword, '^[0-9]{5,}$', 'changePassword', 'newPassword', 'oldChangePassword')">
                        </div>
                    </div>
                </form>


            </div>
            <div class="modal-footer">
                <button type="button" id="brnClosechnagepasswordmodle" class="btn btn-secondary" data-dismiss="modal">
                    Close
                </button>
                <button type="button" class="btn btn-primary"
                        onclick="btnSaveChangePasswordMC()">Save changes
                </button>
            </div>
        </div>
    </div>
</div>

</body>
</html>

